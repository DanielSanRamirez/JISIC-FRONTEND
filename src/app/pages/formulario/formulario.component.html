<div class="col-12">
    <div style="text-align: center;">
        <h1>
            {{'HOME.TITLE' | translate}}
        </h1>
    </div>
    <div class="col-2">
        <select class="custom-select" [(ngModel)]="selectedLanguages" (ngModelChange)="selectLanguage($event)">
            <option value="formulario-es">
                {{'HOME.SPANISH' | translate}}
            </option>

            <option value="formulario-en">
                {{'HOME.ENGLISH' | translate}}
            </option>
        </select>
    </div>
    <br>
    <div class="alert alert-info" role="alert">
        <h2>{{'HOME.TITULOINFO' | translate}}</h2>
        <ul>
            <li>
                {{'HOME.REGLA1' | translate}}
            </li>
            <li>
                {{'HOME.REGLA2' | translate}}
            </li>
            <li>
                {{'HOME.REGLA3' | translate}}
            </li>
            <li>
                {{'HOME.REGLA4' | translate}}
            </li>
        </ul>
    </div>

    <form [formGroup]="participanteForm" (submit)="datosParticipante()">
        <mat-vertical-stepper linear #stepper>

            <!--Step de Información Personal-->
            <mat-step [label]="step[0]" [stepControl]="participanteForm" [stepControl]="identificacionForm">


                <div class="row row-formulario">
                    <div class="col">
                        <label for="inputEmail4">{{'HOME.NAMES' | translate}}</label>
                        <input type="text" class="form-control" placeholder="First name" formControlName="nombres">
                        <div class="col text-danger"
                            *ngIf="participanteForm.get('nombres').invalid && (participanteForm.get('nombres').dirty || participanteForm.get('nombres').touched)">
                            <p *ngIf="campoNoValido('nombres')">{{'HOME.NAMESMSG' | translate}}</p>

                        </div>
                    </div>
                    <div class="col">
                        <label for="inputEmail4">{{'HOME.LASTNAMES' | translate}}</label>
                        <input type="text" class="form-control" placeholder="Last name" formControlName="apellidos">
                        <div class="col text-danger"
                            *ngIf="participanteForm.get('apellidos').invalid && (participanteForm.get('apellidos').dirty || participanteForm.get('apellidos').touched)">
                            <p *ngIf="campoNoValido('apellidos')">{{'HOME.LASTNAMESMSG' | translate}}</p>
                        </div>
                    </div>
                </div>
                <div class="row row-formulario">
                    <div class="col">
                        <label for="inputEmail4">{{'HOME.ADDRESS' | translate}}</label>
                        <input type="text" class="form-control" placeholder="Address" formControlName="direccion">
                        <div class="col text-danger"
                            *ngIf="participanteForm.get('direccion').invalid && (participanteForm.get('direccion').dirty || participanteForm.get('direccion').touched)">
                            <p *ngIf="campoNoValido('direccion')">{{'HOME.ADDRESSMSG' | translate}}</p>
                        </div>
                    </div>
                    <div class="col">
                        <label for="inputEmail4">{{'HOME.PHONE' | translate}}</label>
                        <div class="input-group mb-2" *ngIf="selectedLanguages === 'formulario-es'">
                            <div class="input-group-prepend">
                                <div class="input-group-text">+</div>
                            </div>
                            <select class="custom-select mr-sm-2" formControlName="codTelefono">
                                <option value="">Choose...</option>
                                <option *ngFor="let pais of paises" [value]="pais._id">
                                    {{pais.phone_code}} - {{pais.nombre}}
                                </option>
                            </select>

                            <input type="text" class="form-control" placeholder="Phone" formControlName="telefono"
                                maxlength="20">

                        </div>


                        <div class="input-group mb-2" *ngIf="selectedLanguages !== 'formulario-es'">
                            <div class="input-group-prepend">
                                <div class="input-group-text">+</div>
                            </div>
                            <select class="custom-select mr-sm-2" formControlName="codTelefono">
                                <option value="">Choose...</option>
                                <option *ngFor="let pais of paises" [value]="pais._id">
                                    {{pais.phone_code}} - {{pais.name}}
                                </option>
                            </select>
                            <input type="text" class="form-control" placeholder="Phone" formControlName="telefono">
                        </div>
                        <div class="col text-danger"
                            *ngIf="participanteForm.get('codTelefono').invalid && (participanteForm.get('codTelefono').dirty || participanteForm.get('codTelefono').touched)">
                            <p *ngIf="campoNoValido('codTelefono')">{{'HOME.CODEPHONEMSG' | translate}}</p>
                        </div>
                        <div class="col text-danger"
                            *ngIf="participanteForm.get('telefono').invalid && (participanteForm.get('telefono').dirty || participanteForm.get('telefono').touched)">
                            <p *ngIf="campoNoValido('telefono')">{{'HOME.PHONEMSG' | translate}}</p>
                        </div>

                    </div>
                </div>
                <div class="row row-formulario">
                    <div class="col">
                        <label for="inputEmail4">{{'HOME.EMAIL' | translate}}</label>
                        <input type="text" class="form-control" placeholder="example@email.com" formControlName="email">
                        <div class="col text-danger"
                            *ngIf="participanteForm.get('email').invalid && (participanteForm.get('email').dirty || participanteForm.get('email').touched)">
                            <p *ngIf="campoNoValido('email')">{{'HOME.EMAILMSG' | translate}}</p>
                        </div>
                    </div>
                    <div class="col">
                        <label for="inputEmail4">{{'HOME.COUNTRY' | translate}}</label>
                        <div class="input-group mb-2" *ngIf="selectedLanguages === 'formulario-es'">

                            <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" formControlName="pais">
                                <option value="">Choose...</option>
                                <option *ngFor="let pais of paises" [value]="pais._id">
                                    {{pais.nombre}}
                                </option>
                            </select>

                        </div>

                        <div class="input-group mb-2" *ngIf="selectedLanguages !== 'formulario-es'">

                            <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" formControlName="pais">
                                <option value="">Choose...</option>
                                <option *ngFor="let pais of paises" [value]="pais._id">
                                    {{pais.name}}
                                </option>
                            </select>

                        </div>
                        <div class="col text-danger"
                            *ngIf="participanteForm.get('pais').invalid && (participanteForm.get('pais').dirty || participanteForm.get('pais').touched)">
                            <p *ngIf="campoNoValido('pais')">{{'HOME.COUNTRYMSG' | translate}}</p>
                        </div>
                    </div>
                </div>
                <form [formGroup]="identificacionForm">
                    <div class="row">
                        <div class="col-6">
                            <label>{{'HOME.IDTYPE' | translate}}</label>
                            <select class="custom-select mr-sm-2 tipoIdt" formControlName="tipoIdentificacion">
                                <option selected value="">Choose...</option>
                                <option value="1">{{'HOME.IDCARD' | translate}}</option>
                                <option value="2">{{'HOME.PASSPORT' | translate}}</option>
                            </select>
                        </div>
                        <div class="col-6" *ngIf="identificacionForm.controls.tipoIdentificacion.value === '1'">
                            <label>{{'HOME.IDENTIFICATION' | translate}}</label>
                            <input type="text" class="form-control" placeholder="Identification"
                                formControlName="identificacion" maxlength="10" minlength="10" required>
                        </div>
                        <div class="col-6" *ngIf="identificacionForm.controls.tipoIdentificacion.value === '2'">
                            <label>{{'HOME.IDENTIFICATION' | translate}}</label>
                            <input type="text" class="form-control" placeholder="Identification"
                                formControlName="pasaporte" required>
                        </div>
                    </div>

                    <div class="col text-danger"
                        *ngIf="identificacionForm.get('tipoIdentificacion').invalid && (identificacionForm.get('tipoIdentificacion').dirty || identificacionForm.get('tipoIdentificacion').touched)">
                        <p *ngIf="campoNoValidoTipoIdentificacion('tipoIdentificacion')">
                            {{'HOME.IDTYPEMSG' | translate}}</p>
                    </div>
                    <div class="col text-danger"
                        *ngIf="identificacionForm.value.tipoIdentificacion === '1' && identificacionForm.get('identificacion').invalid && (identificacionForm.get('identificacion').dirty || identificacionForm.get('identificacion').touched)">
                        <p *ngIf="campoNoValidoTipoIdentificacion('identificacion')">
                            {{'HOME.IDENTIFICATIONMSG' | translate}}</p>
                    </div>
                    <div class="col text-danger"
                        *ngIf="identificacionForm.value.tipoIdentificacion === '2' && identificacionForm.get('pasaporte').invalid && (identificacionForm.get('pasaporte').dirty || identificacionForm.get('pasaporte').touched)">
                        <p *ngIf="campoNoValidoTipoIdentificacion('pasaporte')">{{'HOME.PASAPORTEMSG' | translate}}
                        </p>
                    </div>
                </form>


                <br>

                <div class="row justify-content-end">
                    <button type="button" class="btn btn-info" mat-button matStepperNext
                        *ngIf="identificacionForm.value.tipoIdentificacion === '1'"
                        [disabled]="participanteForm.invalid"
                        [disabled]="identificacionForm.get('identificacion').invalid"
                        [disabled]="!identificacionForm.get('pasaporte').invalid">{{'HOME.NEXT' | translate}}</button>
                    <button type="button" class="btn btn-info" mat-button matStepperNext
                        *ngIf="identificacionForm.value.tipoIdentificacion === '2'"
                        [disabled]="participanteForm.invalid"
                        [disabled]="identificacionForm.get('pasaporte').invalid">{{'HOME.NEXT' | translate}}</button>
                </div>

            </mat-step>

            <!--Step de Inscripción-->
            <mat-step [label]="step[1]">

                <div class="row">

                    <div class="col-7">

                        <div *ngFor="let producto of productos">
                            <app-datos-inscripcion [_id]="producto._id" [perfil]="producto.nombre"
                                [perfilEn]="producto.name" [costo]="producto.costo" [idioma]="selectedLanguages"
                                (enviarArreglo)="obtenerDatosCompra($event)"></app-datos-inscripcion>
                        </div>

                    </div>

                    <div class="col-5">
                        <h1>{{'HOME.CART' | translate}}</h1>
                        <div *ngIf="arregloItemProducto.length > 0; else elseBlock">
                            <div class="info alert alert-info" *ngFor="let item of arregloItemProducto" role="alert"
                                style="width: 100%;">
                                <p *ngIf="selectedLanguages === 'formulario-es'">
                                    {{item.nombre}}
                                </p>
                                <p *ngIf="selectedLanguages === 'formulario-en'">
                                    {{item.name}}
                                </p>
                                <p>$ {{item.costo}}</p>
                                <div class="row justify-content-end">
                                    <div class="col-auto">
                                        <button class="btn btn-primary" type="button"
                                            (click)="eliminarProducto(item.idProducto)">{{'HOME.DELETE' | translate}}</button>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h1>{{'HOME.TOTALCOST' | translate}}{{costoTotal}}</h1>
                                <h1></h1>
                            </div>

                            <div class="row justify-content-end">
                                <button type="button" class="btn btn-info" mat-button
                                    matStepperPrevious>{{'HOME.BACK' | translate}}</button>
                                <button type="button" class="btn btn-info" mat-button
                                    matStepperNext>{{'HOME.NEXT' | translate}}</button>
                            </div>
                        </div>
                    </div>
                </div>

                <ng-template #elseBlock>
                    <div class="info alert alert-warning" role="alert">
                        {{'HOME.CARTMSG' | translate}}
                    </div>
                </ng-template>

            </mat-step>

            <!--Step de Done-->
            <mat-step [label]="step[2]">
                <app-mensaje-fin-formulario [completo]="arregloItemProducto.length"></app-mensaje-fin-formulario>
                <div class="row justify-content-end">
                    <button type="button" class="btn btn-info" mat-button
                        matStepperPrevious>{{'HOME.BACK' | translate}}</button>
                    <button type="submit" class="btn btn-info" mat-button
                        *ngIf="arregloItemProducto.length > 0">{{'HOME.SEND' | translate}}</button>
                </div>
            </mat-step>

        </mat-vertical-stepper>

    </form>
</div>